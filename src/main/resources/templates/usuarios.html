<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout :: head">
<body>
	<header th:replace="layout/layout :: header"></header>

	<div class="container py-4">
		<div class="card bg-light">
			<h1 class="card-header" th:text="${titulo}"></h1>
			<div class="card-body">
				<div class="container">
				<div class="btn-group">
					<h4 class="card-title">
						<a sec:authorize="hasRole('ROLE_ADMIN')"
							class="btn btn-primary btn-xs" th:href="@{'/usuario/'}"
							th:text="'Dar de alta usuario'"></a>
					</h4>
					<h4 class="card-title px-4">
							<a sec:authorize="hasRole('ROLE_ADMIN')" class="btn btn-primary btn-xs" th:href="@{'/paciente/listar'}"
								th:text="'Listado de pacientes'"></a>
						</h4>
				</div>
				</div>
				
				<div class="alert alert-info my-4"
					th:if="${#lists.isEmpty(usuarios)}"
					th:text="'No hay usuarios registrados en la base de datos'">
				</div>

				<div class="container py-4">
					<div class="row row-cols-1 row-cols-md-3">
						<div th:if="${usuario.fechaBaja==null}"
							th:each="usuario: ${usuarios}" class="col mb-4">
							<div class="card h-100 text-center " style="width: 18rem;">
								<img th:object="${usuario}"
									th:if="${#strings.length(usuario.foto)>0}"
									class="card-img-top"
									th:src="@{'/usuario/uploads/' + ${usuario.foto}}"
									th:alt="${usuario.foto}" />

								<div class="card-body">
									<h5 class="card-title" th:text="${usuario.apellido} +' '+${usuario.username}"></h5>
									<p class="card-text" th:text="${usuario.rol}"></p>
								</div>
								<div class="card-footer">
									<a th:href="@{/usuario/editar/} + ${usuario.id}"
										th:text="'Editar'" class="btn btn-primary"></a> <a
										sec:authorize="hasRole('ROLE_ADMINISTRADOR')"
										class="btn btn-danger btn-xs"
										th:href="@{/usuario/eliminar/} + ${usuario.id}"
										th:text="'Dar de baja'"
										onclick="return confirm('¿Estás seguro que quieres dar de baja?');"></a>
								</div>
							</div>
						</div>
					</div>

					<div class="container">
						<h4 class="card-title">
							<a class="btn btn-primary btn-xs" th:href="@{'/'}"
								th:text="'Volver al inicio'"></a>
						</h4>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer th:replace="layout/layout :: footer"></footer>
</body>

</html>