<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout :: head">
<body>
	<header th:replace="layout/layout :: header"></header>

	<div class="container py-4">
		<div class="card bg-light">
			<h1 class="card-header" th:text="${titulo}"></h1>
			<div class="card-body">
				<div class="container">
					<h4 class="card-title">
						<a sec:authorize="hasRole('ROLE_ADMINISTRADOR')"
							class="btn btn-primary btn-xs" th:href="@{'/paciente/'}"
							th:text="'Dar de alta paciente'"></a>
					</h4>
				</div>
				<div class="alert alert-info my-4"
					th:if="${#lists.isEmpty(pacientes)}"
					th:text="'No hay pacientes registrados en la base de datos'">
				</div>

				<div class="container py-4">
					<div class="row row-cols-1 row-cols-md-3">
						<div th:if="${paciente.fechaBaja==null}"
							th:each="paciente: ${pacientes}" class="col mb-4">
							<div class="card h-100 text-center " style="width: 18rem;">
								<img th:object="${paciente}"
									th:if="${#strings.length(paciente.foto)>0}"
									class="card-img-top"
									th:src="@{'/paciente/uploads/' + ${paciente.foto}}"
									th:alt="${paciente.foto}" />

								<div class="card-body">
									<h5 class="card-title" th:text="${paciente.apellido}"></h5>
									<p class="card-text" th:text="${paciente.username}"></p>
								</div>
								<div class="card-footer">
									<a th:href="@{/paciente/ver/} + ${paciente.id}"
										th:text="'Detalle'" class="btn btn-primary"></a> <a
										sec:authorize="hasRole('ROLE_ADMINISTRADOR')"
										class="btn btn-danger btn-xs"
										th:href="@{/paciente/eliminar/} + ${paciente.id}"
										th:text="'Dar de baja'"
										onclick="return confirm('¿Estás seguro que quieres dar de baja?');"></a>
								</div>
							</div>
						</div>
					</div>
					
					<div class="container">
						<h4 class="card-title">
							<a class="btn btn-primary btn-xs" th:href="@{'/terapeuta/listar'}"
								th:text="'Volver a terapeutas'"></a>
						</h4>
					</div>
					
					<div class="container">
						<h4 class="card-title">
							<a class="btn btn-primary btn-xs" th:href="@{'/'}"
								th:text="'Volver al inicio'"></a>
						</h4>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer th:replace="layout/layout :: footer"></footer>
</body>

</html>